{% extends "base.html" %}
{% import 'contents_macros.html' as layout with context -%}

{% block additionalscripts %}
    {{ layout.googlescripts() }}
{% endblock %}


{% block body %}

    <div class="jumbotron jumbotron-fluid">
        <div class="container">
            <h1>Welcome to SoGE IT Support</h1>
    {#        <p><a class="btn btn-primary btn-lg" href="https://github.com/gabrielssilva/flasktasks">Source code</a></p>#}
        </div>
    </div>




    <div class="container" >

        <div class="row">
            <div class="col {% if not LDAPUser.uid_trim()=="soge" %}col-sm-12 col-lg-9 col-md-12{% endif %}">
                <div id="carouselExampleControls" class="carousel slide w-100" data-ride="carousel">
                    <div class="carousel-inner" style="min-height: 1000px">
                        <div class="carousel-item active">
{#                            <a href="{{ url_for('usage') }}">more...</a>#}
                            {{ layout.usage() }}
                        </div>
                        <div class="carousel-item">
{#                            <a href="{{ url_for('service_status') }}"></a>#}
                            {{ layout.servicestatus(services) }}
                        </div>
                        <div class="carousel-item">
{#                            <a href="{{ url_for('events') }}"></a>#}
                            {{ layout.whatson(nowevents, futureevents) }}
                        </div>
                    </div>
{#                    {% if not LDAPUser.uid_trim()=="soge" %}#}
                        <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
{#                    {% endif %}#}
                </div>

            </div>

            {% if not LDAPUser.uid_trim()=="soge" %}
            <div class="col col-lg-3 col-md-9">
                <div class="row">
                    <div class="card w-100">
                        <div class="card-body">
                            <h4 class="card-title">IT News</h4>
                            <p class="card-text">{{ layout.newsbrief(news) }}</p>
                            <a href="{{ url_for('news') }}" class="btn btn-primary">more..</a>
                        </div>
                    </div>
{#                </div>#}
{#                <div class="row">#}

                    <div class="card w-100" >
{#                        <img class="card-img-top" src="{{ url_for('static', filename='img/calendar.png') }}" alt="OUCE GitLab"/>#}
                        <div class="card-body">
                            <h4 class="card-title">IT Events</h4>
                            <p class="card-text">{{ layout.whatsonbrief(nowevents, futureevents) }}</p>
                            <a href="{{ url_for('events') }}" class="btn btn-primary">more..</a>
                        </div>
                    </div>
{#                </div>#}
{##}
{#                <div class="row">#}

                    <div class="card w-100" >
                        <a  href="https://gitlab.ouce.ox.ac.uk">
                            <img class="card-img-top" src="{{ url_for('static', filename='img/gitlab.png') }}" alt="OUCE GitLab"/>
                        </a>
                        <div class="card-body">
                            <h4 class="card-title">OUCE GitLab</h4>
                            <p class="card-text">Version control for your projects' text, script and code files</p>
                            <a href="https://gitlab.ouce.ox.ac.uk" class="btn btn-primary">more..</a>
                        </div>
                    </div>

{#                </div>#}
{##}
{#                <div class="row">#}

                    <div class="card w-100" >
                        <a  href="https://db.ouce.ox.ac.uk">
                            <img class="card-img-top" src="{{ url_for('static', filename='img/fruit_bowl_icon_color.png') }}" alt="OUCE GitLab"/>
                        </a>
                        <div class="card-body">
                            <h4 class="card-title">Data Storage</h4>
                            <p class="card-text">Data storage and management pages for your projects</p>
                            <a href="https://db.ouce.ox.ac.uk" class="btn btn-primary">more..</a>
                        </div>
                    </div>

                </div>
            </div>
            {% endif %}
        </div>


    </div>






{% if debug %}
    <h1>Flask-SocketIO Test</h1>
    Send:
    <form id="emit" method="POST" action='#'>
        <input type="text" name="emit_data" id="emit_data" placeholder="Message">
        <input type="submit" value="Echo">
    <p>Async mode is: <b>{{ async_mode }}, Average latency: <b><span id="ping-pong"></span>ms</b></p>
    </form>
{#    <form id="broadcast" method="POST" action='#'>#}
{#        <input type="text" name="broadcast_data" id="broadcast_data" placeholder="Message">#}
{#        <input type="submit" value="Broadcast">#}
{#    </form>#}
{#    <form id="join" method="POST" action='#'>#}
{#        <input type="text" name="join_room" id="join_room" placeholder="Room Name">#}
{#        <input type="submit" value="Join Room">#}
{#    </form>#}
{#    <form id="leave" method="POST" action='#'>#}
{#        <input type="text" name="leave_room" id="leave_room" placeholder="Room Name">#}
{#        <input type="submit" value="Leave Room">#}
{#    </form>#}
{#    <form id="send_room" method="POST" action='#'>#}
{#        <input type="text" name="room_name" id="room_name" placeholder="Room Name">#}
{#        <input type="text" name="room_data" id="room_data" placeholder="Message">#}
{#        <input type="submit" value="Send to Room">#}
{#    </form>#}
{#    <form id="close" method="POST" action="#">#}
{#        <input type="text" name="close_room" id="close_room" placeholder="Room Name">#}
{#        <input type="submit" value="Close Room">#}
{#    </form>#}
{#    <form id="disconnect" method="POST" action="#">#}
{#        <input type="submit" value="Disconnect">#}
{#    </form>#}
    <div id="log"></div>

{% endif %}



{% endblock %}
